package View.arquivo;

import conexoes.ConexaoMySQL;
import View.TelaInicial;
import java.awt.Dimension;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 *
 * @author luiz.barcellos
 */
public class Cad_Movimentacoes extends javax.swing.JInternalFrame {

    /**
     * Creates new form Cad_Movimentacoes
     */
    //VARIÁVEIS QUE IRÃO RECEBER DADOS DA CONSULTA
    int empresa;
    int estabelecimento;
    int departamento;

    String controla_prateleira;

    ConexaoMySQL cn = new ConexaoMySQL();

    int var_consulta;

    public Cad_Movimentacoes() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    public void setPosicao() {
        Dimension d = this.getDesktopPane().getSize();
        this.setLocation((d.width - this.getSize().width) / 2, (d.height - this.getSize().height) / 2);
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPesquisar = new javax.swing.JFrame();
        jPanel4 = new javax.swing.JPanel();
        jTxtPesquisa_Multi = new javax.swing.JTextField();
        jBtnConfirmar = new javax.swing.JButton();
        jBtnCancelar = new javax.swing.JButton();
        jScrollPane4 = new javax.swing.JScrollPane();
        jTblConsulta_Multi = new javax.swing.JTable();
        jPanel1 = new javax.swing.JPanel();
        jCbTemas = new javax.swing.JComboBox<>();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jTxtId = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        jBtnPesquisar = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        jTxtIdItem = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jTxtNomeItem = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jTxtIdOrigem = new javax.swing.JTextField();
        jTxtNomeOrigem = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jTxtIdDestino = new javax.swing.JTextField();
        jTxtNomeDestino = new javax.swing.JTextField();
        jBtnPesquisaDestino = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jBtnAdicionar = new javax.swing.JButton();
        jBtnEditar = new javax.swing.JButton();
        jBtnGravar = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        jSeparator2 = new javax.swing.JSeparator();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jTxtEstante = new javax.swing.JTextField();
        jTxtPrateleira = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jTxtControlaPrateleiras = new javax.swing.JTextField();

        jPesquisar.setTitle("Pesquisar");
        jPesquisar.setMinimumSize(new java.awt.Dimension(700, 400));

        jTxtPesquisa_Multi.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtPesquisa_Multi.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTxtPesquisa_MultiKeyReleased(evt);
            }
        });

        jBtnConfirmar.setText("Adicionar");
        jBtnConfirmar.setEnabled(false);
        jBtnConfirmar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnConfirmarActionPerformed(evt);
            }
        });

        jBtnCancelar.setText("Cancelar");
        jBtnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnCancelarActionPerformed(evt);
            }
        });

        jTblConsulta_Multi.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTblConsulta_Multi.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jTblConsulta_Multi.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTblConsulta_MultiMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jTblConsulta_MultiMouseEntered(evt);
            }
        });
        jScrollPane4.setViewportView(jTblConsulta_Multi);

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel4Layout.createSequentialGroup()
                        .addGap(0, 453, Short.MAX_VALUE)
                        .addComponent(jBtnCancelar)
                        .addGap(18, 18, 18)
                        .addComponent(jBtnConfirmar))
                    .addComponent(jTxtPesquisa_Multi)
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTxtPesquisa_Multi, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 180, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBtnConfirmar)
                    .addComponent(jBtnCancelar))
                .addContainerGap())
        );

        javax.swing.GroupLayout jPesquisarLayout = new javax.swing.GroupLayout(jPesquisar.getContentPane());
        jPesquisar.getContentPane().setLayout(jPesquisarLayout);
        jPesquisarLayout.setHorizontalGroup(
            jPesquisarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPesquisarLayout.setVerticalGroup(
            jPesquisarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        setClosable(true);
        setTitle("Movimentação de Arquivo");

        jCbTemas.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jCbTemas.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "ASSUNTOS", "ARQUIVOS" }));
        jCbTemas.setSelectedIndex(1);
        jCbTemas.setEnabled(false);

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel1.setText("Tipo");

        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel2.setText("Código");

        jTxtId.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtId.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtIdActionPerformed(evt);
            }
        });
        jTxtId.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTxtIdKeyReleased(evt);
            }
        });

        jBtnPesquisar.setText("...");
        jBtnPesquisar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnPesquisarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jTxtId, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jBtnPesquisar)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jCbTemas, javax.swing.GroupLayout.PREFERRED_SIZE, 239, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
            .addComponent(jSeparator1)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jCbTemas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2)
                    .addComponent(jTxtId, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBtnPesquisar))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 19, Short.MAX_VALUE)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        jTxtIdItem.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtIdItem.setEnabled(false);
        jTxtIdItem.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTxtIdItemKeyReleased(evt);
            }
        });

        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel3.setText("Item");

        jTxtNomeItem.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtNomeItem.setEnabled(false);
        jTxtNomeItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtNomeItemActionPerformed(evt);
            }
        });

        jLabel4.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel4.setText("Origem");

        jTxtIdOrigem.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtIdOrigem.setEnabled(false);
        jTxtIdOrigem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtIdOrigemActionPerformed(evt);
            }
        });

        jTxtNomeOrigem.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtNomeOrigem.setEnabled(false);
        jTxtNomeOrigem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtNomeOrigemActionPerformed(evt);
            }
        });

        jLabel5.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel5.setText("Destino");

        jTxtIdDestino.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtIdDestino.setEnabled(false);
        jTxtIdDestino.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTxtIdDestinoKeyReleased(evt);
            }
        });

        jTxtNomeDestino.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtNomeDestino.setEnabled(false);
        jTxtNomeDestino.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTxtNomeDestinoActionPerformed(evt);
            }
        });

        jBtnPesquisaDestino.setText("...");
        jBtnPesquisaDestino.setEnabled(false);
        jBtnPesquisaDestino.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnPesquisaDestinoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jTxtIdOrigem, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 18, Short.MAX_VALUE)
                        .addComponent(jTxtIdDestino, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jTxtIdItem, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTxtNomeItem)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jTxtNomeDestino, javax.swing.GroupLayout.DEFAULT_SIZE, 326, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jBtnPesquisaDestino))
                    .addComponent(jTxtNomeOrigem))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(jTxtNomeItem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTxtIdItem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(jTxtIdOrigem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTxtNomeOrigem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jTxtIdDestino, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jTxtNomeDestino, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jLabel5)
                    .addComponent(jBtnPesquisaDestino))
                .addContainerGap(13, Short.MAX_VALUE))
        );

        jBtnAdicionar.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnAdicionar.setText("Adicionar");
        jBtnAdicionar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnAdicionarActionPerformed(evt);
            }
        });

        jBtnEditar.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnEditar.setText("Editar");
        jBtnEditar.setEnabled(false);

        jBtnGravar.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnGravar.setText("Gravar");
        jBtnGravar.setEnabled(false);
        jBtnGravar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnGravarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jBtnAdicionar, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 100, Short.MAX_VALUE)
                    .addComponent(jBtnEditar, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jBtnGravar, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jBtnAdicionar)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jBtnEditar)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jBtnGravar)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jLabel6.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel6.setText("Detalhes do Local");

        jLabel7.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel7.setText("Estante");

        jTxtEstante.setEnabled(false);

        jTxtPrateleira.setEnabled(false);

        jLabel8.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel8.setText("Prateleira");

        jLabel9.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel9.setText("Controla Prateleiras");

        jTxtControlaPrateleiras.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtControlaPrateleiras.setEnabled(false);

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addComponent(jLabel7)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTxtEstante, javax.swing.GroupLayout.PREFERRED_SIZE, 58, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jLabel8)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTxtPrateleira, javax.swing.GroupLayout.PREFERRED_SIZE, 58, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jLabel9)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTxtControlaPrateleiras, javax.swing.GroupLayout.PREFERRED_SIZE, 45, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jLabel6))
                .addContainerGap(218, Short.MAX_VALUE))
            .addComponent(jSeparator2)
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel6)
                .addGap(18, 18, 18)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(jTxtEstante, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8)
                    .addComponent(jTxtPrateleira, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9)
                    .addComponent(jTxtControlaPrateleiras, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(77, 77, 77))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
            .addComponent(jPanel5, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, 97, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jTxtIdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtIdActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtIdActionPerformed

    private void jTxtNomeItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtNomeItemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtNomeItemActionPerformed

    private void jTxtIdOrigemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtIdOrigemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtIdOrigemActionPerformed

    private void jTxtNomeOrigemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtNomeOrigemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtNomeOrigemActionPerformed

    private void jTxtNomeDestinoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTxtNomeDestinoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtNomeDestinoActionPerformed

    private void jBtnGravarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnGravarActionPerformed
        String id = jTxtId.getText();
        String id_item = jTxtIdItem.getText();
        String id_origem = jTxtIdOrigem.getText();
        String id_destino = jTxtIdDestino.getText();
        String estante = jTxtEstante.getText();
        String prateleira = jTxtPrateleira.getText();
        int usuario = TelaInicial.usuariosys;

        String sql;
        String sql2;

        if ("Cancelar".equals(jBtnAdicionar.getText())) {

            cn.conecta();
            cn.executeConsulta("show table status like 'cad_arquivo_movimentacoes' ;");
            try {
                while (cn.rs.next()) {
                    id = cn.rs.getString("auto_increment");
                }
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(null, ex);
            }
            cn.desconecta();

            sql = "INSERT INTO cad_arquivo_movimentacoes (id_caixa,id_local,"
                    + "id_local_anterior,estante,prateleira,dt_movimentacao, "
                    + "hora_movimentacao,usu_inc) "
                    + "VALUES ('" + id_item + "','" + id_destino + "',"
                    + "'" + id_origem + "','" + estante + "','" + prateleira + "',"
                    + "current_date(), current_time(), " + usuario + ");";
        } else {
            sql = "UPDATE cad_arquivo_movimentacoes SET id_local = '" + id_destino + "', "
                    + "estante = '" + estante + "', prateleira = '" + prateleira + "', "
                    + "usu_alt = " + usuario + " "
                    + "where id = '" + id + "';";
        }

        cn.conecta();
        if ("S".equals(controla_prateleira)) {
            if ("".equals(estante)
                    || "".equals(prateleira)) {
                JOptionPane.showMessageDialog(this, "Você precisa informar a estante e a prateleira.");
                ConexaoMySQL.resultadoUpd = 2;
            } else {
                cn.executeAtualizacao(sql);
            }
        } else {
            cn.executeAtualizacao(sql);
        }
        cn.desconecta();

        if (ConexaoMySQL.resultadoUpd < 1) {
            jTxtId.setText(id);
            DesabilitarEdicao();
        }
    }//GEN-LAST:event_jBtnGravarActionPerformed

    private void jTxtPesquisa_MultiKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTxtPesquisa_MultiKeyReleased

        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtPesquisa_MultiKeyReleased

    private void jBtnConfirmarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnConfirmarActionPerformed
        IncluiPesquisa();
        jPesquisar.dispose();// TODO add your handling code here:
    }//GEN-LAST:event_jBtnConfirmarActionPerformed

    private void jBtnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnCancelarActionPerformed
        jPesquisar.setVisible(false);        // TODO add your handling code here:
        jPesquisar.dispose();        // TODO add your handling code here:
    }//GEN-LAST:event_jBtnCancelarActionPerformed

    private void jTblConsulta_MultiMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTblConsulta_MultiMouseClicked
        jBtnConfirmar.setEnabled(true);    // TODO add your handling code here:
    }//GEN-LAST:event_jTblConsulta_MultiMouseClicked

    private void jTblConsulta_MultiMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTblConsulta_MultiMouseEntered
        // TODO add your handling code here:
    }//GEN-LAST:event_jTblConsulta_MultiMouseEntered

    private void jBtnAdicionarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnAdicionarActionPerformed
        if ("Adicionar".equals(jBtnAdicionar.getText())) {
            jBtnAdicionar.setText("Cancelar");
            limpaCampos();
            jTxtId.setText("NOVO");
            HabilitarEdicao();
        } else {
            DesabilitarEdicao();
            limpaCampos();
        }
    }//GEN-LAST:event_jBtnAdicionarActionPerformed

    private void jBtnPesquisarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnPesquisarActionPerformed
        var_consulta = 1;

        jPesquisar.setVisible(true);

        MontaLista();
    }//GEN-LAST:event_jBtnPesquisarActionPerformed

    private void jBtnPesquisaDestinoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnPesquisaDestinoActionPerformed
        var_consulta = 3;

        jPesquisar.setVisible(true);

        MontaLista();
    }//GEN-LAST:event_jBtnPesquisaDestinoActionPerformed

    private void jTxtIdKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTxtIdKeyReleased
        String id = jTxtId.getText();
        limpaCampos();
        jTxtId.setText(id);

        var_consulta = 11;

        IncluiPesquisa();
    }//GEN-LAST:event_jTxtIdKeyReleased

    private void jTxtIdDestinoKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTxtIdDestinoKeyReleased
        var_consulta = 33;
        IncluiPesquisa();
    }//GEN-LAST:event_jTxtIdDestinoKeyReleased

    private void jTxtIdItemKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTxtIdItemKeyReleased
        var_consulta = 22;
        IncluiPesquisa();

    }//GEN-LAST:event_jTxtIdItemKeyReleased


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBtnAdicionar;
    private javax.swing.JButton jBtnCancelar;
    private javax.swing.JButton jBtnConfirmar;
    private javax.swing.JButton jBtnEditar;
    private javax.swing.JButton jBtnGravar;
    private javax.swing.JButton jBtnPesquisaDestino;
    private javax.swing.JButton jBtnPesquisar;
    private javax.swing.JComboBox<String> jCbTemas;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JFrame jPesquisar;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JTable jTblConsulta_Multi;
    private javax.swing.JTextField jTxtControlaPrateleiras;
    private javax.swing.JTextField jTxtEstante;
    private javax.swing.JTextField jTxtId;
    private javax.swing.JTextField jTxtIdDestino;
    private javax.swing.JTextField jTxtIdItem;
    private javax.swing.JTextField jTxtIdOrigem;
    private javax.swing.JTextField jTxtNomeDestino;
    private javax.swing.JTextField jTxtNomeItem;
    private javax.swing.JTextField jTxtNomeOrigem;
    private javax.swing.JTextField jTxtPesquisa_Multi;
    private javax.swing.JTextField jTxtPrateleira;
    // End of variables declaration//GEN-END:variables

    public void HabilitarEdicao() {
        jTxtId.setEnabled(false);
        jTxtIdDestino.setEnabled(true);
        jTxtIdItem.setEnabled(true);

        //jCbTemas.setEnabled(true);
        jBtnPesquisar.setEnabled(false);
        jBtnPesquisaDestino.setEnabled(true);
        jBtnGravar.setEnabled(true);
    }

    public void DesabilitarEdicao() {
        jTxtId.setEnabled(true);
        jTxtIdDestino.setEnabled(false);
        jTxtIdItem.setEnabled(false);
        jTxtEstante.setEnabled(false);
        jTxtPrateleira.setEnabled(false);

        jCbTemas.setEnabled(false);

        jBtnPesquisar.setEnabled(true);
        jBtnPesquisaDestino.setEnabled(false);
        jBtnGravar.setEnabled(false);
        jBtnEditar.setEnabled(false);

        jBtnAdicionar.setText("Adicionar");
        jBtnEditar.setText("Editar");
    }

    public void MontaLista() {

        DefaultTableModel lista = (DefaultTableModel) jTblConsulta_Multi.getModel();

        lista.setColumnCount(0);
        lista.setRowCount(0);

        switch (var_consulta) {
            case 1:
                lista.addColumn("Id");
                lista.addColumn("Descrição");
                lista.addColumn("Origem > Destino");
                jTblConsulta_Multi.getColumnModel().getColumn(0).setMaxWidth(40);
                jTblConsulta_Multi.getColumnModel().getColumn(0).setMinWidth(40);
                jTblConsulta_Multi.getTableHeader().getColumnModel().getColumn(0).setMaxWidth(40);
                jTblConsulta_Multi.getTableHeader().getColumnModel().getColumn(0).setMinWidth(40);

                cn.conecta();
                String sql1 = "SELECT a.id,c.nome_tipo,c.sequencia,"
                        + "c.nome_estabelecimento,b.descricao as destino,"
                        + "case when bb.descricao is null then 'Origem' else bb.descricao end as origem "
                        + "FROM cad_arquivo_movimentacoes a "
                        + "left join cad_arquivo_locais b on (b.id = a.id_local) "
                        + "left join cad_arquivo_locais bb on (bb.id = a.id_local_anterior) "
                        + "left join cad_arquivo_pastas c on (c.id = a.id_caixa);";
                cn.executeConsulta(sql1);
                try {
                    while (cn.rs.next()) {

                        lista.addRow(new String[]{
                            cn.rs.getString("id"),
                            cn.rs.getString("nome_tipo")
                            + " nº " + cn.rs.getString("sequencia")
                            + " - "
                            + cn.rs.getString("nome_estabelecimento"),
                            cn.rs.getString("origem")
                            + " para "
                            + cn.rs.getString("destino")
                        });
                    }
                } catch (SQLException ex) {

                    JOptionPane.showMessageDialog(null, "Erro ao consultar o banco de dados: " + ex);
                }
                cn.desconecta();

                break;

            case 3:

                lista.addColumn("Id");
                lista.addColumn("Descrição");

                jTblConsulta_Multi.getColumnModel().getColumn(0).setMaxWidth(40);
                jTblConsulta_Multi.getColumnModel().getColumn(0).setMinWidth(40);
                jTblConsulta_Multi.getTableHeader().getColumnModel().getColumn(0).setMaxWidth(40);
                jTblConsulta_Multi.getTableHeader().getColumnModel().getColumn(0).setMinWidth(40);

                cn.conecta();
                cn.executeConsulta("SELECT * FROM cad_arquivo_locais ORDER BY descricao");

                try {
                    while (cn.rs.next()) {

                        lista.addRow(new String[]{
                            cn.rs.getString("id"),
                            cn.rs.getString("descricao")
                        });
                    }
                } catch (SQLException ex) {

                    JOptionPane.showMessageDialog(null, "Erro ao consultar o banco de dados: " + ex);
                }
                cn.desconecta();

                break;
        }

    }

    public void IncluiPesquisa() {

        String id = jTxtId.getText();
        String idAssunto = jTxtIdItem.getText();
        String idOrigem = jTxtIdOrigem.getText();
        String idDestino = jTxtIdDestino.getText();

        int linha = jTblConsulta_Multi.getSelectedRow();

        switch (var_consulta) {
            case 1:

                jTxtId.setText(jTblConsulta_Multi.getValueAt(linha, 0).toString());

            case 11:
                id = jTxtId.getText();

                cn.conecta();
                String sql11 = "SELECT * FROM cad_arquivo_movimentacoes "
                        + "WHERE id = '" + id + "';";
                cn.executeConsulta(sql11);
                try {
                    while (cn.rs.next()) {
                        jTxtIdItem.setText(cn.rs.getString(2));
                        jTxtIdOrigem.setText(cn.rs.getString(3));
                        jTxtIdDestino.setText(cn.rs.getString(4));
                        jTxtEstante.setText(cn.rs.getString(7));
                        jTxtPrateleira.setText(cn.rs.getString(8));
                    }
                } catch (SQLException ex) {
                    JOptionPane.showMessageDialog(this, "Cadastro não encontrado!");
                }
                cn.desconecta();
                var_consulta = 22;
                IncluiPesquisa();

                var_consulta = 33;
                IncluiPesquisa();
                break;

            case 2:

                jTxtIdItem.setText(jTblConsulta_Multi.getValueAt(linha, 0).toString());

            case 22:
                jTxtNomeItem.setText("");

                if (!"".equals(idAssunto)) {
                    cn.conecta();
                    cn.executeConsulta("SELECT * FROM cad_arquivo_pastas WHERE id = " + idAssunto);

                    try {
                        while (cn.rs.next()) {
                            jTxtNomeItem.setText(
                                    cn.rs.getString("nome_tipo")
                                    + " nº " + cn.rs.getString("sequencia")
                                    + " - "
                                    + cn.rs.getString("nome_estabelecimento")
                            );
                        }
                        cn.rs.close();
                    } catch (SQLException ex) {
                        JOptionPane.showMessageDialog(null, ex);
                    }
                    cn.desconecta();
                }

            case 222:
                jTxtIdOrigem.setText("");

                if (!"".equals(idAssunto)) {
                    cn.conecta();
                    String sql222 = "SELECT * FROM cad_arquivo_movimentacoes a "
                            //+ "left join cad_arquivo_locais b on (b.id = a.id_local)  "
                            + "where a.id = (select max(c.id) from cad_arquivo_movimentacoes c where c.id_caixa = " + idAssunto + ");";

                    cn.executeConsulta(sql222);

                    try {
                        while (cn.rs.next()) {
                            jTxtIdOrigem.setText(cn.rs.getString("id_local"));
                            //jTxtNomeOrigem.setText(cn.rs.getString("descricao"));
                        }
                        cn.rs.close();

                    } catch (Exception ex) {
                        JOptionPane.showMessageDialog(null, ex);
                    }
                    cn.desconecta();
                }

            case 2222:
                jTxtNomeOrigem.setText("");
                if (!"".equals(idAssunto)) {
                    cn.conecta();
                    String sql2222 = "SELECT * FROM cad_arquivo_movimentacoes a "
                            + "left join cad_arquivo_locais b on (b.id = a.id_local)  "
                            + "where a.id = (select max(c.id) from cad_arquivo_movimentacoes c where c.id_caixa = " + idAssunto + ");";

                    cn.executeConsulta(sql2222);

                    try {
                        while (cn.rs.next()) {
                            //jTxtIdOrigem.setText(cn.rs.getString("id_local"));
                            jTxtNomeOrigem.setText(cn.rs.getString("descricao"));
                        }

                    } catch (Exception ex) {
                        JOptionPane.showMessageDialog(null, ex);
                    }
                    cn.desconecta();
                }

                break;

            case 3:
                jTxtIdDestino.setText(jTblConsulta_Multi.getValueAt(linha, 0).toString());

            case 33:
                idDestino = jTxtIdDestino.getText();
                jTxtNomeDestino.setText("");
                controla_prateleira = "N";
                habilitaPrateleira(controla_prateleira);

                if (!"".equals(idDestino)) {
                    cn.conecta();
                    cn.executeConsulta("SELECT * FROM cad_arquivo_locais WHERE id = " + idDestino);
                    try {
                        while (cn.rs.next()) {
                            jTxtNomeDestino.setText(cn.rs.getString("descricao"));
                            controla_prateleira = cn.rs.getString("prateleiras");
                        }
                    } catch (Exception ex) {
                        JOptionPane.showMessageDialog(null, ex);
                    }

                    habilitaPrateleira(controla_prateleira);
                }

                break;
        }

    }

    private void habilitaPrateleira(String prateleira) {
        if ("S".equals(prateleira)) {
            jTxtPrateleira.setEnabled(true);
            jTxtEstante.setEnabled(true);
        } else {
            jTxtPrateleira.setEnabled(false);
            jTxtEstante.setEnabled(false);
        }
        jTxtControlaPrateleiras.setText(prateleira);
    }

    private void limpaCampos() {
        jTxtId.setText("");
        jTxtIdDestino.setText("");
        jTxtNomeDestino.setText("");
        jTxtIdItem.setText("");
        jTxtNomeItem.setText("");
        jTxtIdOrigem.setText("");
        jTxtNomeOrigem.setText("");
        jTxtEstante.setText("");
        jTxtPrateleira.setText("");

    }
}
