/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package View;

import conexoes.ConexaoMySQL;
import java.awt.Dimension;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.sql.SQLException;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author luiz.barcellos
 */
public class Cad_Estabelecimentos extends javax.swing.JInternalFrame {

    /**
     * Creates new form Cad_Locais
     */
    ConexaoMySQL cn = new ConexaoMySQL();

    int var_consulta;

    public Cad_Estabelecimentos() {
        initComponents();
    }

    DefaultTableModel lista = new DefaultTableModel(); //LISTA PESQUISA MULTIPLA

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    public void setPosicao() {
        Dimension d = this.getDesktopPane().getSize();
        this.setLocation((d.width - this.getSize().width) / 2, (d.height - this.getSize().height) / 2);
    }

    public void habilitarEdicao() {

        jBtnGravar.setEnabled(true);
        jBtnPesquisa.setEnabled(false);
        //jBtnAddEstabelecimento.setEnabled(true);

        jTxtId.setEnabled(false);
        jTxtDescricao.setEnabled(true);
        jTxtObservacao.setEnabled(true);

    }

    public void habilitarEditarEstabelecimento() {
        jTxtNomeEstab.setEnabled(true);
        jTxtCNPJ.setEnabled(true);
        jTxtIE.setEnabled(true);
        jTxtIM.setEnabled(true);
        jTxtCEP.setEnabled(true);
        jTxtEndereco.setEnabled(true);
        jTxtCidade.setEnabled(true);
        jTxtBairro.setEnabled(true);
        jTxtUF.setEnabled(true);
        jTxtNumero.setEnabled(true);
    }

    public void desabilitarEditarEstabelecimento() {
        jTxtNomeEstab.setEnabled(false);
        jTxtCNPJ.setEnabled(false);
        jTxtIE.setEnabled(false);
        jTxtIM.setEnabled(false);
        jTxtCEP.setEnabled(false);
        jTxtEndereco.setEnabled(false);
        jTxtCidade.setEnabled(false);
        jTxtBairro.setEnabled(false);
        jTxtUF.setEnabled(false);
        jTxtNumero.setEnabled(false);
    }

    public void limpaCampos() {
        jTxtId.setText("");
        jTxtDescricao.setText("");
        jTxtObservacao.setText("");
    }

    public void limpaEstab() {
        jTxtIdEstab.setText("");
        jTxtNomeEstab.setText("");
        jTxtCNPJ.setText("");
        jTxtIE.setText("");
        jTxtIM.setText("");
        jTxtCEP.setText("");
        jTxtEndereco.setText("");
        jTxtNumero.setText("");
        jTxtUF.setText("");
        jTxtCidade.setText("");
        jTxtBairro.setText("");
    }

    public void desabilitarEdicao() {
        jBtnGravar.setEnabled(false);
        jBtnEditar.setEnabled(false);
        jBtnIncluir.setEnabled(true);
        jBtnPesquisa.setEnabled(true);
        jBtnIncluir.setText("Adicionar");
        jBtnEditar.setText("Editar");
        //jBtnAddEstabelecimento.setEnabled(false);

        jTxtId.setEnabled(true);
        jTxtDescricao.setEnabled(false);
        jTxtObservacao.setEnabled(false);
    }

    public void MontaLista() {

        switch (var_consulta) {
            case 1:

                jTblConsulta_Multi.setModel(lista);

                lista.setColumnCount(0);  //limpa a tabela
                lista.setRowCount(0);     //limpa a tabela

                lista.addColumn("Id");
                lista.addColumn("Razão Social");
                lista.addColumn("Observação");

                jTblConsulta_Multi.getColumnModel().getColumn(0).setMaxWidth(50);
                jTblConsulta_Multi.getColumnModel().getColumn(0).setMinWidth(50);
                jTblConsulta_Multi.getTableHeader().getColumnModel().getColumn(0).setMaxWidth(50);
                jTblConsulta_Multi.getTableHeader().getColumnModel().getColumn(0).setMinWidth(50);

                jTxtPesquisa_Multi.grabFocus();
                if (!"".equals(jTxtPesquisa_Multi.getText())) {
                    cn.conecta();
                    String sql = "SELECT * FROM cad_empresas "
                            + "WHERE UPPER(nome) "
                            + "LIKE '%" + jTxtPesquisa_Multi.getText().toUpperCase() + "%'"
                            + " ORDER BY nome";

                    cn.executeConsulta(sql);

                    try {
                        while (cn.rs.next()) {

                            lista.addRow(new String[]{
                                cn.rs.getString("id"),
                                cn.rs.getString("nome"),
                                cn.rs.getString("observacao")});
                        }
                    } catch (SQLException ex) {

                        JOptionPane.showMessageDialog(null, "Erro ao consultar o banco de dados: " + ex);
                    }
                    cn.desconecta();

                } else { //Configuração para quando não há texto no campo pesquisa
                    cn.conecta();
                    String sql = "SELECT * FROM cad_empresas "
                            + " ORDER BY nome";

                    cn.executeConsulta(sql);

                    try {
                        while (cn.rs.next()) {

                            lista.addRow(new String[]{
                                cn.rs.getString("id"),
                                cn.rs.getString("nome"),
                                cn.rs.getString("observacao")});

                        }
                    } catch (SQLException ex) {

                        JOptionPane.showMessageDialog(null, "Erro ao consultar o banco de dados: " + ex);
                    }
                    cn.desconecta();
                    //Configuração dos botões, quando não há pesquisa
                    jBtnConfirmar.setEnabled(true);
                }

        }

    }

    public void IncluiPesquisa() {

        if (var_consulta == 1) {

            DefaultTableModel consulta = (DefaultTableModel) jTblConsulta_Multi.getModel();

            int linha = jTblConsulta_Multi.getSelectedRow();

            jTxtId.setText(consulta.getValueAt(linha, 0).toString());
            jTxtDescricao.setText(consulta.getValueAt(linha, 1).toString());
            jTxtObservacao.setText(consulta.getValueAt(linha, 2).toString());

            var_consulta = 3;

            IncluiPesquisa();

        } else if (var_consulta == 2) {

            jTxtDescricao.setText("");
            jTxtObservacao.setText("");

            String id = jTxtId.getText();
            String descricao;
            String observacao;

            DefaultTableModel estab = (DefaultTableModel) jTblEstabelecimentos.getModel();
            estab.setColumnCount(0);
            estab.setRowCount(0);
            estab.addColumn("Id");
            estab.addColumn("Estabelecimento");
            jTblEstabelecimentos.getColumnModel().getColumn(0).setMaxWidth(40);
            jTblEstabelecimentos.getColumnModel().getColumn(0).setMinWidth(40);
            jTblEstabelecimentos.getTableHeader().getColumnModel().getColumn(0).setMaxWidth(40);
            jTblEstabelecimentos.getTableHeader().getColumnModel().getColumn(0).setMinWidth(40);

            cn.conecta();
            String sql = "SELECT * FROM cad_empresas a "
                    + "left join cad_estabelecimentos b on (b.id_empresa = a.id) "
                    + " WHERE a.id = " + id;

            try {
                cn.executeConsulta(sql);
                while (cn.rs.next()) {
                    descricao = cn.rs.getString(2);
                    observacao = cn.rs.getString(3);

                    jTxtDescricao.setText(descricao);
                    jTxtObservacao.setText(observacao);
                }
                cn.desconecta();
                cn.conecta();
                cn.executeConsulta(sql);
                while (cn.rs.next()) {
                    estab.addRow(new String[]{
                        cn.rs.getString(4),
                        cn.rs.getString(5)});
                }
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(this, "Cadastro não encontrado!");
            }

            cn.desconecta();

        } else {

            //jTxtDescricao.setText("");
            //jTxtObservacao.setText("");
            String id = jTxtId.getText();
            String descricao;
            String observacao;

            DefaultTableModel estab = (DefaultTableModel) jTblEstabelecimentos.getModel();
            estab.setColumnCount(0);
            estab.setRowCount(0);
            estab.addColumn("Id");
            estab.addColumn("Estabelecimento");
            jTblEstabelecimentos.getColumnModel().getColumn(0).setMaxWidth(40);
            jTblEstabelecimentos.getColumnModel().getColumn(0).setMinWidth(40);
            jTblEstabelecimentos.getTableHeader().getColumnModel().getColumn(0).setMaxWidth(40);
            jTblEstabelecimentos.getTableHeader().getColumnModel().getColumn(0).setMinWidth(40);

            cn.conecta();
            String sql = "SELECT * FROM cad_empresas a "
                    + "left join cad_estabelecimentos b on (b.id_empresa = a.id) "
                    + " WHERE a.id = " + id;

            try {
                cn.executeConsulta(sql);
                while (cn.rs.next()) {
                    descricao = cn.rs.getString(2);
                    observacao = cn.rs.getString(3);

                    jTxtDescricao.setText(descricao);
                    jTxtObservacao.setText(observacao);
                }
                cn.desconecta();
                cn.conecta();
                cn.executeConsulta(sql);
                while (cn.rs.next()) {
                    estab.addRow(new String[]{
                        cn.rs.getString(4),
                        cn.rs.getString(5)});
                }
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(this, "Cadastro não encontrado!");
            }

            cn.desconecta();

        }

        jBtnEditar.setEnabled(false);
        if (!"".equals(jTxtDescricao.getText())) {
            jBtnEditar.setEnabled(true);
        }
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPesquisar = new javax.swing.JFrame();
        jPanel3 = new javax.swing.JPanel();
        jTxtPesquisa_Multi = new javax.swing.JTextField();
        jBtnConfirmar = new javax.swing.JButton();
        jBtnCancelar = new javax.swing.JButton();
        jScrollPane4 = new javax.swing.JScrollPane();
        jTblConsulta_Multi = new javax.swing.JTable();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jTxtId = new javax.swing.JTextField();
        jTxtDescricao = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jTxtObservacao = new javax.swing.JTextField();
        jBtnPesquisa = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        jBtnIncluir = new javax.swing.JButton();
        jBtnEditar = new javax.swing.JButton();
        jBtnGravar = new javax.swing.JButton();
        jPanel4 = new javax.swing.JPanel();
        jTpEstabelecimentos = new javax.swing.JTabbedPane();
        jPnlEstabelecimentos = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTblEstabelecimentos = new javax.swing.JTable();
        jPnlCadastro = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jTxtIdEstab = new javax.swing.JTextField();
        jTxtNomeEstab = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jTxtCNPJ = new javax.swing.JTextField();
        jTxtIE = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        jTxtIM = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jTxtCEP = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        jTxtEndereco = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jTxtNumero = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        jTxtUF = new javax.swing.JTextField();
        jTxtCidade = new javax.swing.JTextField();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jTxtBairro = new javax.swing.JTextField();
        jBtnAddEstabelecimento = new javax.swing.JButton();
        jBtnEditarEstabelecimento = new javax.swing.JButton();

        jPesquisar.setTitle("Pesquisar");
        jPesquisar.setMinimumSize(new java.awt.Dimension(700, 400));

        jTxtPesquisa_Multi.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtPesquisa_Multi.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTxtPesquisa_MultiKeyReleased(evt);
            }
        });

        jBtnConfirmar.setText("Adicionar");
        jBtnConfirmar.setEnabled(false);
        jBtnConfirmar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnConfirmarActionPerformed(evt);
            }
        });

        jBtnCancelar.setText("Cancelar");
        jBtnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnCancelarActionPerformed(evt);
            }
        });

        jTblConsulta_Multi.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTblConsulta_Multi.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jTblConsulta_Multi.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTblConsulta_MultiMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jTblConsulta_MultiMouseEntered(evt);
            }
        });
        jScrollPane4.setViewportView(jTblConsulta_Multi);

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addGap(0, 453, Short.MAX_VALUE)
                        .addComponent(jBtnCancelar)
                        .addGap(18, 18, 18)
                        .addComponent(jBtnConfirmar))
                    .addComponent(jTxtPesquisa_Multi)
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTxtPesquisa_Multi, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 180, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBtnConfirmar)
                    .addComponent(jBtnCancelar))
                .addContainerGap())
        );

        javax.swing.GroupLayout jPesquisarLayout = new javax.swing.GroupLayout(jPesquisar.getContentPane());
        jPesquisar.getContentPane().setLayout(jPesquisarLayout);
        jPesquisarLayout.setHorizontalGroup(
            jPesquisarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPesquisarLayout.setVerticalGroup(
            jPesquisarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        setClosable(true);
        setTitle("Empresas");

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel1.setText("Código");

        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel2.setText("Empresa");

        jTxtId.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtId.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTxtIdKeyReleased(evt);
            }
        });

        jTxtDescricao.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtDescricao.setEnabled(false);

        jLabel4.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel4.setText("Observação");

        jTxtObservacao.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtObservacao.setEnabled(false);

        jBtnPesquisa.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnPesquisa.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/zoom.png"))); // NOI18N
        jBtnPesquisa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnPesquisaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel4)
                    .addComponent(jLabel2)
                    .addComponent(jLabel1))
                .addGap(10, 10, 10)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTxtObservacao, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jTxtId, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jBtnPesquisa)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addComponent(jTxtDescricao))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jTxtId, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBtnPesquisa, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(8, 8, 8)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jTxtDescricao, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTxtObservacao, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel4)))
        );

        jBtnIncluir.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnIncluir.setText("Adicionar");
        jBtnIncluir.setToolTipText("Insere mais um registro.");
        jBtnIncluir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnIncluirActionPerformed(evt);
            }
        });

        jBtnEditar.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnEditar.setText("Editar");
        jBtnEditar.setEnabled(false);
        jBtnEditar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnEditarActionPerformed(evt);
            }
        });

        jBtnGravar.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnGravar.setText("Gravar");
        jBtnGravar.setEnabled(false);
        jBtnGravar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnGravarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jBtnIncluir, javax.swing.GroupLayout.DEFAULT_SIZE, 93, Short.MAX_VALUE)
                            .addComponent(jBtnEditar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addComponent(jBtnGravar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jBtnIncluir, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jBtnEditar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jBtnGravar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTpEstabelecimentos.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

        jScrollPane1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

        jTblEstabelecimentos.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTblEstabelecimentos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {}
            },
            new String [] {

            }
        ));
        jTblEstabelecimentos.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTblEstabelecimentosMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jTblEstabelecimentos);

        javax.swing.GroupLayout jPnlEstabelecimentosLayout = new javax.swing.GroupLayout(jPnlEstabelecimentos);
        jPnlEstabelecimentos.setLayout(jPnlEstabelecimentosLayout);
        jPnlEstabelecimentosLayout.setHorizontalGroup(
            jPnlEstabelecimentosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPnlEstabelecimentosLayout.createSequentialGroup()
                .addGap(0, 9, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 575, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 10, Short.MAX_VALUE))
        );
        jPnlEstabelecimentosLayout.setVerticalGroup(
            jPnlEstabelecimentosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPnlEstabelecimentosLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 224, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        jTpEstabelecimentos.addTab("Estabelecimentos", jPnlEstabelecimentos);

        jPnlCadastro.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel3.setText("Estabelecimento");

        jTxtIdEstab.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtIdEstab.setEnabled(false);

        jTxtNomeEstab.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtNomeEstab.setEnabled(false);

        jLabel5.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel5.setText("CNPJ");

        jTxtCNPJ.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtCNPJ.setEnabled(false);

        jTxtIE.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtIE.setEnabled(false);

        jLabel6.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel6.setText("Inscr. Estadual.");

        jTxtIM.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtIM.setEnabled(false);

        jLabel7.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel7.setText("Inscr. Municipal");

        jLabel8.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel8.setText("CEP");

        jTxtCEP.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtCEP.setEnabled(false);

        jLabel9.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel9.setText("Endereço");

        jTxtEndereco.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtEndereco.setEnabled(false);

        jLabel10.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel10.setText("Numero");

        jTxtNumero.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtNumero.setEnabled(false);

        jLabel11.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel11.setText("UF");

        jTxtUF.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtUF.setEnabled(false);

        jTxtCidade.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtCidade.setEnabled(false);

        jLabel12.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel12.setText("Cidade");

        jLabel13.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel13.setText("Bairro");

        jTxtBairro.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTxtBairro.setEnabled(false);

        jBtnAddEstabelecimento.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnAddEstabelecimento.setText("Novo");
        jBtnAddEstabelecimento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnAddEstabelecimentoActionPerformed(evt);
            }
        });

        jBtnEditarEstabelecimento.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jBtnEditarEstabelecimento.setText("Editar");
        jBtnEditarEstabelecimento.setEnabled(false);
        jBtnEditarEstabelecimento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBtnEditarEstabelecimentoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPnlCadastroLayout = new javax.swing.GroupLayout(jPnlCadastro);
        jPnlCadastro.setLayout(jPnlCadastroLayout);
        jPnlCadastroLayout.setHorizontalGroup(
            jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPnlCadastroLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPnlCadastroLayout.createSequentialGroup()
                        .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel7)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtIM))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel5)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtCNPJ, javax.swing.GroupLayout.PREFERRED_SIZE, 188, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(18, 18, 18)
                        .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel6)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtIE))
                            .addGroup(jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel8)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtCEP, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(0, 0, Short.MAX_VALUE))))
                    .addGroup(jPnlCadastroLayout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addGap(18, 18, 18)
                        .addComponent(jTxtIdEstab, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jTxtNomeEstab))
                    .addGroup(jPnlCadastroLayout.createSequentialGroup()
                        .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel11)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtUF, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel12)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtCidade, javax.swing.GroupLayout.PREFERRED_SIZE, 216, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel13))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel9)
                                .addGap(18, 18, 18)
                                .addComponent(jTxtEndereco, javax.swing.GroupLayout.PREFERRED_SIZE, 325, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(0, 0, 0)
                        .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(jPnlCadastroLayout.createSequentialGroup()
                                .addComponent(jLabel10)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jTxtNumero, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPnlCadastroLayout.createSequentialGroup()
                                .addGap(10, 10, 10)
                                .addComponent(jTxtBairro)))
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPnlCadastroLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(jBtnEditarEstabelecimento, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jBtnAddEstabelecimento, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        jPnlCadastroLayout.setVerticalGroup(
            jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPnlCadastroLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(jTxtIdEstab, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTxtNomeEstab, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(jTxtCNPJ, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel6)
                    .addComponent(jTxtIE, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(jTxtIM, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8)
                    .addComponent(jTxtCEP, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(jTxtEndereco, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel10)
                    .addComponent(jTxtNumero, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(jTxtUF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel12)
                    .addComponent(jTxtCidade, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel13)
                    .addComponent(jTxtBairro, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPnlCadastroLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBtnAddEstabelecimento)
                    .addComponent(jBtnEditarEstabelecimento))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTpEstabelecimentos.addTab("Cadastro", jPnlCadastro);

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTpEstabelecimentos)
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTpEstabelecimentos)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jBtnGravarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnGravarActionPerformed
        String id = jTxtId.getText();

        //INSERINDO DADOS
        if (!"".equals(jTxtDescricao.getText())
                && "Cancelar".equals(jBtnIncluir.getText())) {

            cn.conecta();
            cn.executeConsulta("SHOW TABLE STATUS LIKE 'cad_empresas';");
            try {
                while (cn.rs.next()) {
                    id = cn.rs.getString("auto_increment");
                }
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(rootPane, ex);
            }
            cn.desconecta();

            String descricao = jTxtDescricao.getText().toUpperCase();
            String observacao = jTxtObservacao.getText();
            cn.conecta();

            String sql = "INSERT INTO CAD_EMPRESAS (NOME, OBSERVACAO) "
                    + "VALUES ('" + descricao + "','" + observacao + "')";
            cn.executeAtualizacao(sql);

            cn.desconecta();

            jTxtId.setText(id);

            desabilitarEdicao();

            // ALTERANDO DADOS    
        } else if (!"".equals(jTxtDescricao.getText())
                && "Cancelar".equals(jBtnEditar.getText())) {

            String descricao = jTxtDescricao.getText().toUpperCase();
            String observacao = jTxtObservacao.getText();
            cn.conecta();

            String sql = "UPDATE CAD_EMPRESAS SET NOME = '" + descricao
                    + "', OBSERVACAO = '" + observacao + "'"
                    + "WHERE ID = " + jTxtId.getText();

            cn.executeAtualizacao(sql);

            cn.desconecta();

            desabilitarEdicao();

        } else {
            JOptionPane.showMessageDialog(rootPane, "Preencher descrição!");
        }
    }//GEN-LAST:event_jBtnGravarActionPerformed

    private void jBtnEditarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnEditarActionPerformed
        if ("Editar".equals(jBtnEditar.getText())) {
            habilitarEdicao();

            jBtnEditar.setText("Cancelar");
            jBtnIncluir.setEnabled(false);
        } else {
            limpaCampos();
            desabilitarEdicao();
        }
    }//GEN-LAST:event_jBtnEditarActionPerformed

    private void jBtnIncluirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnIncluirActionPerformed
        limpaCampos();

        if ("Adicionar".equals(jBtnIncluir.getText())) {

            habilitarEdicao();

            jBtnIncluir.setText("Cancelar");
            jBtnEditar.setEnabled(false);

            JOptionPane.showMessageDialog(this, "Primeiro, adicione a empresa e grave. Após, adicione os estabelecimentos.");
        } else {

            desabilitarEdicao();
        }
    }//GEN-LAST:event_jBtnIncluirActionPerformed

    private void jBtnPesquisaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnPesquisaActionPerformed
        var_consulta = 1;

        jPesquisar.setVisible(true);
        MontaLista();
    }//GEN-LAST:event_jBtnPesquisaActionPerformed

    private void jTxtPesquisa_MultiKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTxtPesquisa_MultiKeyReleased

        // TODO add your handling code here:
    }//GEN-LAST:event_jTxtPesquisa_MultiKeyReleased

    private void jBtnConfirmarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnConfirmarActionPerformed
        IncluiPesquisa();
        jPesquisar.dispose();// TODO add your handling code here:
    }//GEN-LAST:event_jBtnConfirmarActionPerformed

    private void jBtnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnCancelarActionPerformed
        jPesquisar.setVisible(false);        // TODO add your handling code here:
        jPesquisar.dispose();        // TODO add your handling code here:
    }//GEN-LAST:event_jBtnCancelarActionPerformed

    private void jTblConsulta_MultiMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTblConsulta_MultiMouseClicked
        jBtnConfirmar.setEnabled(true);    // TODO add your handling code here:
    }//GEN-LAST:event_jTblConsulta_MultiMouseClicked

    private void jTblConsulta_MultiMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTblConsulta_MultiMouseEntered
        // TODO add your handling code here:
    }//GEN-LAST:event_jTblConsulta_MultiMouseEntered

    private void jBtnAddEstabelecimentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnAddEstabelecimentoActionPerformed
        if ("Cancelar".equals(jBtnEditarEstabelecimento.getText())) {
            jBtnAddEstabelecimento.setText("Novo");
            jBtnEditarEstabelecimento.setText("Editar");
            jBtnEditarEstabelecimento.setEnabled(false);

            try {
                String id = jTxtId.getText();
                String idest = jTxtIdEstab.getText();
                String estab = jTxtNomeEstab.getText();
                String cnpj = jTxtCNPJ.getText();
                String ie = jTxtIE.getText();
                String im = jTxtIM.getText();
                String cep = jTxtCEP.getText();
                String endereco = jTxtEndereco.getText();
                String numero = jTxtNumero.getText();
                String uf = jTxtUF.getText();
                String cidade = jTxtCidade.getText();
                String bairro = jTxtBairro.getText();

                if ("NOVO".equals(idest)) {
                    try {
                        String sql = "INSERT into cad_estabelecimentos (razao_social, "
                                + "inscricao_federal, rua, numero, cep, "
                                + "uf, cidade, bairro, id_empresa, inscricao_estadual, "
                                + "inscricao_municipal) VALUES ('" + estab + "', '" + cnpj + "', "
                                + "'" + endereco + "', '" + numero + "','" + cep + "','" + uf + "', "
                                + "'" + cidade + "','" + bairro + "','" + id + "','" + ie + "','" + im + "')";

                        cn.conecta();
                        cn.executeAtualizacao(sql);
                        cn.desconecta();
                    } catch (Exception ex) {
                        JOptionPane.showMessageDialog(this, ex);
                    }
                } else {
                    try {
                        String sql = "UPDATE cad_estabelecimentos SET razao_social = "
                                + "'" + estab + "', inscricao_federal ='" + cnpj + "', "
                                + "rua = '" + endereco + "', numero = '" + numero + "', "
                                + "cep = '" + cep + "', uf = '" + uf + "', cidade = '" + cidade + "', "
                                + "bairro = '" + bairro + "', inscricao_estadual = '" + ie + "', "
                                + "inscricao_municipal = '" + im + "' "
                                + "where id =" + idest;

                        cn.conecta();
                        cn.executeAtualizacao(sql);
                        cn.desconecta();

                    } catch (Exception ex) {
                        JOptionPane.showMessageDialog(this, ex);
                    }
                }

            } catch (Exception e) {
                JOptionPane.showMessageDialog(this, e);
            }

            jTpEstabelecimentos.setSelectedIndex(0);
            desabilitarEditarEstabelecimento();
            limpaEstab();
            var_consulta = 2;
            IncluiPesquisa();
            //

        } else if (!"".equals(jTxtId.getText())) {
            jBtnAddEstabelecimento.setText("Gravar");
            jBtnEditarEstabelecimento.setText("Cancelar");
            jTxtIdEstab.setText("NOVO");
            jBtnEditarEstabelecimento.setEnabled(true);
            habilitarEditarEstabelecimento();
            //Gravar
        } else {
            JOptionPane.showMessageDialog(this, "Selecione uma empresa!");
        }

    }//GEN-LAST:event_jBtnAddEstabelecimentoActionPerformed

    private void jTxtIdKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTxtIdKeyReleased
        if (!"".equals(jTxtId.getText())) {

            String x = jTxtId.getText();
            jTxtId.setText(x);

            var_consulta = 2;

            jTpEstabelecimentos.setSelectedIndex(0);

            IncluiPesquisa();

        }
    }//GEN-LAST:event_jTxtIdKeyReleased

    private void jBtnEditarEstabelecimentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBtnEditarEstabelecimentoActionPerformed
        if ("Cancelar".equals(jBtnEditarEstabelecimento.getText())) {
            jBtnAddEstabelecimento.setText("Novo");
            jBtnEditarEstabelecimento.setText("Editar");
            jBtnEditarEstabelecimento.setEnabled(false);
            //jTpEstabelecimentos.setSelectedIndex(0);
            desabilitarEditarEstabelecimento();
            limpaEstab();
            //

        } else {
            jBtnAddEstabelecimento.setText("Gravar");
            jBtnEditarEstabelecimento.setText("Cancelar");
            jBtnAddEstabelecimento.setEnabled(true);
            habilitarEditarEstabelecimento();
            //Gravar
        }// TODO add your handling code here:
    }//GEN-LAST:event_jBtnEditarEstabelecimentoActionPerformed

    private void jTblEstabelecimentosMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTblEstabelecimentosMouseClicked
        try {

            int linha = jTblEstabelecimentos.getSelectedRow();
            String estab = (jTblEstabelecimentos.getValueAt(linha, 0).toString());

            String sql = "SELECT * FROM cad_estabelecimentos "
                    + "WHERE id =" + estab;

            try {
                cn.conecta();
                cn.executeConsulta(sql);
                while (cn.rs.next()) {
                    jTxtIdEstab.setText(cn.rs.getString(1));
                    jTxtNomeEstab.setText(cn.rs.getString(2));
                    jTxtCNPJ.setText(cn.rs.getString(3));
                    jTxtIE.setText(cn.rs.getString(12));
                    jTxtIM.setText(cn.rs.getString(13));
                    jTxtCEP.setText(cn.rs.getString(7));
                    jTxtEndereco.setText(cn.rs.getString(4));
                    jTxtNumero.setText(cn.rs.getString(5));
                    jTxtUF.setText(cn.rs.getString(8));
                    jTxtCidade.setText(cn.rs.getString(9));
                    jTxtBairro.setText(cn.rs.getString(10));
                }
                cn.desconecta();
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(this, "Cadastro não encontrado!" + ex);
            }
            jTpEstabelecimentos.setSelectedIndex(1);

            jBtnEditarEstabelecimento.setEnabled(true);
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, "Selecionar um estabelecimento!");
        }
    }//GEN-LAST:event_jTblEstabelecimentosMouseClicked


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBtnAddEstabelecimento;
    private javax.swing.JButton jBtnCancelar;
    private javax.swing.JButton jBtnConfirmar;
    private javax.swing.JButton jBtnEditar;
    private javax.swing.JButton jBtnEditarEstabelecimento;
    private javax.swing.JButton jBtnGravar;
    private javax.swing.JButton jBtnIncluir;
    private javax.swing.JButton jBtnPesquisa;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JFrame jPesquisar;
    private javax.swing.JPanel jPnlCadastro;
    private javax.swing.JPanel jPnlEstabelecimentos;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JTable jTblConsulta_Multi;
    private javax.swing.JTable jTblEstabelecimentos;
    private javax.swing.JTabbedPane jTpEstabelecimentos;
    private javax.swing.JTextField jTxtBairro;
    private javax.swing.JTextField jTxtCEP;
    private javax.swing.JTextField jTxtCNPJ;
    private javax.swing.JTextField jTxtCidade;
    private javax.swing.JTextField jTxtDescricao;
    private javax.swing.JTextField jTxtEndereco;
    private javax.swing.JTextField jTxtIE;
    private javax.swing.JTextField jTxtIM;
    private javax.swing.JTextField jTxtId;
    private javax.swing.JTextField jTxtIdEstab;
    private javax.swing.JTextField jTxtNomeEstab;
    private javax.swing.JTextField jTxtNumero;
    private javax.swing.JTextField jTxtObservacao;
    private javax.swing.JTextField jTxtPesquisa_Multi;
    private javax.swing.JTextField jTxtUF;
    // End of variables declaration//GEN-END:variables
}
